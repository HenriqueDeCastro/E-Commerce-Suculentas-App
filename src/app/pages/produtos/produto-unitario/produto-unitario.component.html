<ng-container *ngIf="Carregando">
  <app-spinner></app-spinner>
</ng-container>
<ng-container *ngIf="!Carregando">
  <app-voltar></app-voltar>
  <br>
  <br>
  <br>
  <br>
  <ng-container *ngIf="!Produto || !Produto.ativo">
    <app-not-found></app-not-found>
  </ng-container>
  <ng-container *ngIf="Produto && Produto.ativo">
    <div class="mobile">
      <h1 class="titulo centralizar">{{Produto.nome}}</h1>
      <br>
    </div>
    <div class="row">
      <div class="col-sm-5">
        <div class="col-img">
          <img src="{{link}}/resources/{{Produto.imagem}}" alt="{{Produto.nome}}" class="img">
        </div>
        <br>
        <div class="alert alert-warning" role="alert">
          Os produtos do site são reais e tentamos sempre enviar o mais idêntico possível da foto disposta,
          mas cada ítem é único, sendo assim natural a variabilidade de tamanho ou coloração.
        </div>
        <ng-container *ngIf="Produto.tipoProdutoId === IdEncomenda">
          <app-alert-cidades-encomenda></app-alert-cidades-encomenda>
        </ng-container>
        <ng-container *ngIf="ProdutoCarrinho">
          <div class="alert alert-primary" role="alert">
            Você já adicionou {{ProdutoCarrinho.quantidadePedido}} {{ProdutoCarrinho.nome}} ao carrinho!
          </div>
        </ng-container>
      </div>
      <div class="col-sm-7">
        <h1 class="titulo centralizar pc">{{Produto.nome}}</h1>
        <br>
        <mat-list>
          <!-- DESCRIÇÂO -->
          <div mat-subheader class="cabecalho-lista negrito">Descrição</div>
          <mat-list-item class="tamanho-matlineitem">
            <div mat-line class="quebralinha-matline">{{Produto.descricao}}</div>
          </mat-list-item>
          <br>
          <!-- VALOR -->
          <div mat-subheader class="cabecalho-lista negrito">Valor</div>
          <mat-list-item class="tamanho-matlineitem">
            <mat-icon class="material-icons-outlined dinheiro" mat-list-icon>payments</mat-icon>
            <div mat-line class="quebralinha-matline negrito dinheiro">{{Produto.preco | currency:'BRL'}}</div>
            <div mat-line class="quebralinha-matline">Pagamentos são feitos pela ferramenta do PagSeguro©</div>
          </mat-list-item>
          <br>
          <!-- FRETE -->
          <div mat-subheader class="cabecalho-lista negrito">Frete</div>
          <ng-container *ngIf="!ValorFrete">
            <mat-list-item class="tamanho-matlineitem">
              <mat-icon class="material-icons-outlined frete" mat-list-icon>local_shipping</mat-icon>
              <div mat-line class="quebralinha-matline negrito frete">Informe o seu CEP:</div>
              <div mat-line class="quebralinha-matline">
                <br>
                <form [formGroup]="FreteForm" (ngSubmit)="CalcularFrete()" autocomplete="off">
                  <mat-form-field  appearance="fill" class="w-100">
                    <mat-label>CEP</mat-label>
                    <input matInput formControlName="cep" mask="00000-000">
                    <mat-error *ngIf="FreteForm.get('cep').hasError('required')" class="invalid-feedback">CEP é obrigatório</mat-error>
                    <mat-error *ngIf="FreteForm.get('cep').hasError('minlength')" class="invalid-feedback">Insira um CEP valido</mat-error>
                  </mat-form-field>
                </form>
                <br>
              </div>
              <div mat-line class="quebralinha-matline">
                <button mat-flat-button class="btn-Calcular-Frete" class="w-100" (click)="CalcularFrete()" [disabled]=Calculando>{{TextoBotaoCalculo}}</button>
              </div>
            </mat-list-item>
          </ng-container>
          <ng-container *ngIf="ValorFrete">
            <mat-list-item class="tamanho-matlineitem">
              <mat-icon class="material-icons-outlined frete" mat-list-icon>local_shipping</mat-icon>
              <div mat-line class="quebralinha-matline negrito frete">O frete é de {{ValorFrete.price | currency:'BRL'}} para {{CEPStorage | mask:'00000-000'}}</div>
              <div mat-line class="quebralinha-matline">Entregue por {{ValorFrete.company.name}}©</div>
              <div mat-line class="quebralinha-matline negrito frete-calculado cursor"><br>
                <span (click)="LimparFrete()">Calcular para outro endereço ?</span>
              </div>
            </mat-list-item>
          </ng-container>
          <br>
          <ng-container *ngIf="Produto.tipoProdutoId === IdEncomenda">
            <!-- PRAZO -->
            <div mat-subheader class="cabecalho-lista negrito">Prazo de Entrega</div>
            <mat-list-item class="tamanho-matlineitem">
              <mat-icon class="material-icons-outlined prazo" mat-list-icon>timer</mat-icon>
              <div mat-line class="quebralinha-matline negrito prazo">Esse produto tem um prazo de entrega estimado em 30 dias</div>
              <div mat-line class="quebralinha-matline">Compre com antecedência ;)</div>
            </mat-list-item>
            <br>
            <!-- ENCOMENDAR -->
            <div mat-subheader class="cabecalho-lista negrito">Encomendar</div>
            <mat-list-item class="tamanho-matlineitem">
              <mat-icon class="material-icons-outlined estoque" mat-list-icon>local_mall</mat-icon>
              <div mat-line class="quebralinha-matline negrito estoque">Vendemos {{Produto.nome}} apenas por encomendas</div>
              <div mat-line *ngIf="Produto.quantidadeMaxima == 1" class="quebralinha-matline estoque">Limite maximo de compras: {{Produto.quantidadeMaxima}} unidade</div>
              <div mat-line *ngIf="Produto.quantidadeMaxima > 1" class="quebralinha-matline estoque">Limite maximo de compras: {{Produto.quantidadeMaxima}} unidades</div>
              <div mat-line class="quebralinha-matline">Selecione abaixo a quantidade que deseja reservar</div>
            </mat-list-item>
          </ng-container>
          <!-- ESTOQUE -->
          <ng-container *ngIf="Produto.tipoProdutoId === IdEstoque">
            <div mat-subheader class="cabecalho-lista negrito">Estoque</div>
            <mat-list-item class="tamanho-matlineitem">
              <mat-icon class="material-icons-outlined estoque" mat-list-icon>local_mall</mat-icon>
              <div mat-line class="quebralinha-matline negrito  estoque">Temos {{QuantidadeMaxima == null? Produto.estoque : QuantidadeMaxima}} {{Produto.nome}} em estoque</div>
              <div mat-line class="quebralinha-matline">Selecione abaixo a quantidade que deseja levar</div>
            </mat-list-item>
          </ng-container>
        </mat-list>
        <br>
        <br>
        <div class="centralizar">
          <app-botao-quantidade [Quantidade]=Quantidade [QuantidadeMaxima]=QuantidadeMaxima (QuantidadeEscolhida)="ReceberQuantidade($event)"></app-botao-quantidade>
          <br>
          <br>
          <br>
          <app-botao-carrinho *ngIf="Produto.tipoProdutoId === IdEstoque" [TipoBotao]="'solido'" [Quantidade]="Quantidade" [Produto]="Produto" [Voltar]=true></app-botao-carrinho>
          <app-botao-carrinho *ngIf="Produto.tipoProdutoId === IdEncomenda" [TipoBotao]="'solido'" [Quantidade]="Quantidade"[Produto]="Produto" [Voltar]=true></app-botao-carrinho>
        </div>
      </div>
    </div>
  </ng-container>
</ng-container>
