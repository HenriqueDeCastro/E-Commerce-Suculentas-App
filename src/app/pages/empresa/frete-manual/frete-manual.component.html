<app-voltar></app-voltar>
<br>
<br>
<br>
<h1 class="titulo centralizar">Frete Manual</h1>
<br>
<br>
<ng-container *ngIf="!ValoresFretes">
  <form [formGroup]="FreteForm" (ngSubmit)="CalcularFrete()" autocomplete="off">
    <mat-form-field  appearance="fill" class="w-100">
      <mat-label>CEP</mat-label>
      <input matInput formControlName="cep" mask="00000-000">
      <mat-error *ngIf="FreteForm.get('cep').hasError('required')" class="invalid-feedback">CEP é obrigatório</mat-error>
      <mat-error *ngIf="FreteForm.get('cep').hasError('minlength')" class="invalid-feedback">Insira um CEP valido</mat-error>
    </mat-form-field>
  </form>
  <br>
  <button mat-flat-button color=primary class="w-100" (click)="CalcularFrete()" [disabled]=Calculando>{{TextoBotao}}</button>
</ng-container>
<ng-container *ngIf="ValoresFretes">
  <mat-list>
    <div mat-subheader class="negrito">Empresas</div>
    <ng-container *ngFor="let frete of ValoresFretes; let i = index">
      <mat-list-item >
        <mat-icon class="material-icons-outlined {{frete.company.name}}" mat-list-icon>local_shipping</mat-icon>
        <div mat-line class="negrito">{{frete.company.name}} - {{frete.name}}</div>
        <div mat-line *ngIf="frete.price" class="negrito">Valor do frete é de: {{frete.price | currency:'BRL'}}</div>
        <div mat-line *ngIf="!frete.price" class="negrito quebralinha-matline">{{frete.error}}</div>
      </mat-list-item>
      <ng-container *ngIf="ValoresFretes.length > (i + 1)">
        <mat-divider></mat-divider>
      </ng-container>
    </ng-container>
  </mat-list>
  <br>
  <br>
  <button mat-button color=primary type="button" class="btn btn-link btn-register btn-block" (click)="LimparFretes()">Consultar outro CEP ?</button>
</ng-container>

