<ng-container *ngIf="!Estados">
  <app-spinner></app-spinner>
</ng-container>
<ng-container *ngIf="Estados">
  <app-voltar></app-voltar>
  <br>
  <br>
  <br>
  <h1 class="titulo">Adicionar Endereço</h1>
  <br>
  <br>
  <mat-vertical-stepper [linear]="true" #stepper>
    <!-- Identificação -->
    <mat-step [stepControl]="IdentificacaoForm">
      <ng-template matStepLabel>Identificação</ng-template>
      <br>
      <form [formGroup]="IdentificacaoForm" autocomplete="off">
        <mat-form-field  appearance="fill" class="w-100">
          <mat-label>Apelido</mat-label>
          <input matInput formControlName="apelido">
        </mat-form-field>
        <br>
        <br>
        <mat-form-field appearance="fill" class="w-100">
          <mat-label>Estado</mat-label>
            <mat-select formControlName="estado">
            <mat-option *ngFor="let estado of Estados" (click)="SelecaoEstado(estado.id)" [value]="estado.uf">
              {{estado.nome}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="IdentificacaoForm.get('estado').hasError('required')" class="invalid-feedback">Estado é obrigatório</mat-error>
        </mat-form-field>
        <ng-container *ngIf="Procurandocidades">
          <br>
          <br>
          <br>
          <app-progressbar></app-progressbar>
        </ng-container>
        <br>
        <br>
        <mat-form-field appearance="fill" class="w-100">
          <mat-label>Cidade</mat-label>
            <mat-select formControlName="cidade">
            <mat-option *ngFor="let cidade of Cidades"[value]="cidade.nome">
              {{cidade.nome}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="IdentificacaoForm.get('cidade').hasError('required')" class="invalid-feedback">Cidade é obrigatório</mat-error>
        </mat-form-field>
        <br>
        <br>
        <mat-form-field  appearance="fill" class="w-100">
          <mat-label>Bairro</mat-label>
          <input matInput formControlName="bairro">
          <mat-error *ngIf="IdentificacaoForm.get('bairro').hasError('required')" class="invalid-feedback">Bairro é obrigatório</mat-error>
        </mat-form-field>
        <br>
        <br>
        <div class="form-group col-md-12 centralizar">
          <button mat-button matStepperNext class="btn-responsive" color="primary" [disabled]=!IdentificacaoForm.valid>Próximo</button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="DomicilioForm">
      <!-- Domicílio -->
      <ng-template matStepLabel>Domicílio</ng-template>
      <br>
      <form [formGroup]="DomicilioForm" (ngSubmit)="Registrar()" autocomplete="off">
        <mat-form-field  appearance="fill" class="w-100">
          <mat-label>CEP</mat-label>
          <input matInput formControlName="cep" mask="00000-000">
          <mat-error *ngIf="DomicilioForm.get('cep').hasError('required')" class="invalid-feedback">CEP é obrigatório</mat-error>
          <mat-error *ngIf="DomicilioForm.get('cep').hasError('minlength')" class="invalid-feedback">Insira um CEP valido</mat-error>
        </mat-form-field>
        <br>
        <br>
        <mat-form-field  appearance="fill" class="w-100">
          <mat-label>Rua</mat-label>
          <input matInput formControlName="rua">
          <mat-error *ngIf="DomicilioForm.get('rua').hasError('required')" class="invalid-feedback">Rua é obrigatória</mat-error>
        </mat-form-field>
        <br>
        <br>
        <mat-form-field  appearance="fill" class="w-100">
          <mat-label>Número</mat-label>
          <input matInput type="number" formControlName="numero">
          <mat-error *ngIf="DomicilioForm.get('numero').hasError('required')" class="invalid-feedback">Número é obrigatório</mat-error>
        </mat-form-field>
        <br>
        <br>
        <mat-form-field  appearance="fill" class="w-100">
          <mat-label>Complemento</mat-label>
          <input matInput formControlName="complemento">
        </mat-form-field>
        <br>
        <br>
        <ng-container *ngIf="Atualizando">
          <app-progressbar></app-progressbar>
        </ng-container>
        <br>
        <div class="form-group col-md-12 centralizar">
          <button mat-button matStepperPrevious class="w-50" color="warn">Anterior</button>
          <button mat-button matStepperNext class="w-50" color="primary" [disabled]="Atualizando">Finalizar</button>
        </div>
      </form>
    </mat-step>
  </mat-vertical-stepper>

</ng-container>

